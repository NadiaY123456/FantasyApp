9:52 / 12-23: Implement below. I am shooting for production-grade pipeline. Also do it in a modular /refactored way when possible. If you need to see additional files to make a more robust decision, plmk which files are those.

Make sure to provide EXACT EDITS, not like "wherever you compute ...". If you don't see the file you need, EXPLICITELY ask for it upfront!

Task:
I want to connect my character (flash) to AI in the following way:
a user can enter prompt describing an event. Based on that event, the target animation of the character changes to what AI suggests. 

== this is how it works now ==:

ImmersiveVew.swift — places the bottom‑right button and wires it to gameModelView.isHoldingButton.
ActionButtonView.swift — press/hold gesture implementation (onPressStart/onPressEnd).
GameModelView.swift — stores isHoldingButton and conforms to JoystickDataProvider.
ExternalDataProtocol.swift — declares JoystickDataProvider.isHoldingButton.
setupCharacterWithComponents.swift — attaches EventComponent(dataProvider: gameModelView) to the character.
Must‑Have Files (Style Switching + Definitions)

EventComponent.swift — EventSystem updates style guide and calls setAnimationStyleWithButton.
Travel&StyleEvents.swift — edge‑detects button release and cycles styleGuides.
StyleGuide.swift — defines the list of style guides and animation names.
AnimationSettings.swift — default idle/walk animation names used as fallbacks.
Nice‑to‑Have Follow‑Up (How Style Applies)

0-WalkSequence.swift — uses styleGuide.targets[0].isNew to rebuild walk sequence.
2-ExtendWalkSequence.swift — blends into new walking style when isNew is true.
0-IdleSequence.swift — uses style target for idle/idle‑to‑walk transitions.
MoveComponent.swift — button also gates movement, affecting walk vs idle state.
How It Works

The bottom‑right button is ActionButtonView in ImmersiveVew.swift; it toggles gameModelView.isHoldingButton on press/release.
GameModelView exposes that state via JoystickDataProvider, and EventComponent reads it per character.
EventSystem (in EventComponent.swift) updates travel state and then calls setAnimationStyleWithButton.
setAnimationStyleWithButton detects a release (was holding → not holding) and advances the styleGuides list, marking the new target as isNew.
Walk/idle sequence builders see isNew, rebuild/blend to the new animation, then mark it old.

=== how i want it to work: ====

let's have a toggle AI controlled vs user-controlled. In user-controlled, the flow is as it is now (via joystick)

we are adding AI controlled-mode. If no IA instructions are coming, the animation playing is default idle. For the rest, instruction are coming from AI (json in response to user typing an event) instead of joystick. 

